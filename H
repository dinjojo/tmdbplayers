
SELECT 
    o.name AS table_name,
    CASE 
        WHEN i.lockscheme = 0 THEN 'Allpages'
        WHEN i.lockscheme = 1 THEN 'Datapages'
        WHEN i.lockscheme = 2 THEN 'Datarows'
        ELSE 'Unknown'
    END AS locking_scheme
FROM 
    sysobjects o
JOIN 
    sysindexes i ON o.id = i.id
WHERE 
    o.type = 'U'  -- 'U' stands for user tables
    AND i.indid < 2; -- 0 = table-level, 1 = clustered index
